<tbody>
    {% for task in tasks %}
    <tr id="data-row-{{ task.id }}" class="data-row">
        <td>{{ forloop.counter0|add:page_obj.start_index }}</td>
        <td>{{ task.title }}</td>
        <td>{{ task.platform }}</td>
        <td>{{ task.location }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.start_time }}</td>
        <td>{{ task.end_time }}</td>
        <td>{{ task.platform }}</td>
        <td>{{ task.retries }}</td>
        {% if selected_role == 'admin' %}
        <td>
            <div class="action-btns">
                <a href="{% url 'edit_task' task.id %}">Edit</a>
                <a href="{% url 'cancel_task' task.id %}">Cancel</a>
            </div>
        </td>
        {% endif %}
    </tr>
    <!-- Edit form row (hidden by default) -->
    <tr id="edit-form-row-{{ task.id }}" class="edit-form-row" style="display:none;">
        <td colspan="10" style="background: #1a2740;">
            <form class="edit-form"
                  action="{% url 'edit_task' task.id %}"
                  method="post"
                  style="max-width: 500px; margin: 0 auto; background: #112240; border-radius: 10px; padding: 1.5em 2em; box-shadow: 0 2px 8px rgba(10,25,47,0.3);">
                {% csrf_token %}
                <h3 style="color: #64ffda; text-align: center; margin-bottom: 1em;">Edit Task #{{ task.id }}</h3>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Title:
                    <input type="text" name="title" value="{{ task.title }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Platform:
                    <input type="text" name="platform" value="{{ task.platform }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Location:
                    <input type="text" name="location" value="{{ task.location }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Status:
                    <input type="text" name="status" value="{{ task.status }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Start Time:
                    <input type="text" name="start_time" value="{{ task.start_time }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">End Time:
                    <input type="text" name="end_time" value="{{ task.end_time }}" style="margin-top: 0.2em;">
                </label>
                <label style="color: #ccd6f6; margin-bottom: 0.3em;">Retries:
                    <input type="number" name="retries" value="{{ task.retries }}" style="margin-top: 0.2em;">
                </label>
                <div class="action-btns" style="justify-content: center; margin-top: 1em;">
                    <button type="submit" style="background: #64ffda; color: #0a192f; font-weight: 600;">Save</button>
                    <button type="button" onclick="hideEditForm('{{ task.id }}')" style="background: #ff5370; color: #fff; font-weight: 600;">Cancel</button>
                </div>
            </form>
        </td>
    </tr>
    {% endfor %}
</tbody>